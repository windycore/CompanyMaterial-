//***************************************************************************
//!file     si_device_edid.c
//!brief    SiI953x EDID stuff.
//
// No part of this work may be reproduced, modified, distributed,
// transmitted, transcribed, or translated into any language or computer
// format, in any form or by any means without written permission of
// Silicon Image, Inc., 1060 East Arques Avenue, Sunnyvale, California 94085
//
// Copyright 2002-2010, Silicon Image, Inc.  All rights reserved.
//***************************************************************************/

#include "si_drv_nvram_sram.h"

uint8_t  dispData[ EDID_TABLE_LEN];
//------------------------------------------------------------------------------
//  Module Data
//------------------------------------------------------------------------------
/*
ROM const uint8_t gEdidFlashEdidVgaTable [ EDID_VGA_TABLE_LEN ] =
{
//  00    01    02   03     04    05    06    07   08     09    0A    0B    0C    0D    0E   0F
    0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x10, 0xAC, 0x12, 0x40, 0x51, 0x53, 0x44, 0x42,
    0x1C, 0x10, 0x01, 0x03, 0x0E, 0x22, 0x1B, 0x78, 0xEE, 0xE7, 0xE5, 0xA3, 0x59, 0x4A, 0x9E, 0x23,
    0x14, 0x50, 0x54, 0xA5, 0x4B, 0x00, 0x71, 0x4F, 0x81, 0x80, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
    0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x30, 0x2A, 0x00, 0x98, 0x51, 0x00, 0x2A, 0x40, 0x30, 0x70,
    0x13, 0x00, 0x52, 0x0E, 0x11, 0x00, 0x00, 0x1E, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x43, 0x43, 0x32,
    0x38, 0x30, 0x36, 0x37, 0x45, 0x42, 0x44, 0x53, 0x51, 0x0A, 0x00, 0x00, 0x00, 0xFC, 0x00, 0x44,
    0x45, 0x4C, 0x4C, 0x20, 0x31, 0x37, 0x30, 0x37, 0x46, 0x50, 0x0A, 0x20, 0x00, 0x00, 0x00, 0xFD,
    0x00, 0x38, 0x4C, 0x1E, 0x51, 0x0E, 0x00, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x00, 0x1D
};
*/
// 在 utilDataMgrInitialize 中会覆盖
uint8_t g_Init_EdidFlashEdidTable[EDID_TABLE_LEN]=
{
0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x22,0xB4,0x00,0x90,0x0F,0x00,0x00,0x00,
0x02,0x1C,0x01,0x03,0x80,0x3E,0x22,0x78,0xEA,0xBE,0x30,0xA2,0x57,0x4F,0xA2,0x28,
0x0F,0x50,0x54,0xA5,0x4B,0x00,0x71,0x4F,0x81,0x00,0x81,0x80,0xA9,0x40,0xB3,0x00,
0xD1,0xC0,0xD1,0x00,0x01,0x01,0x04,0x74,0x00,0x30,0xF2,0x70,0x5A,0x80,0xB0,0x58,
0x8A,0x00,0x40,0x84,0x63,0x00,0x00,0x1E,0x00,0x00,0x00,0xFF,0x00,0x57,0x4A,0x33,
0x34,0x35,0x31,0x32,0x0A,0x20,0x20,0x20,0x20,0x20,0x00,0x00,0x00,0xFC,0x00,0x54,
0x56,0x4D,0x58,0x42,0x54,0x0A,0x20,0x20,0x20,0x20,0x20,0x20,0x00,0x00,0x00,0xFD,
0x00,0x18,0x55,0x1F,0x72,0x1E,0x00,0x0A,0x20,0x20,0x20,0x20,0x20,0x20,0x01,0xB5,
0x02,0x03,0x2D,0xF1,0x52,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x90,0x11,0x12,0x13,
0x14,0x15,0x16,0x1F,0x20,0x21,0x22,0x23,0x09,0x1F,0x07,0x83,0x01,0x00,0x00,0x6D,
0x03,0x0C,0x00,0x10,0x00,0x00,0x3C,0x20,0x00,0x60,0x03,0x02,0x01,0x02,0x3A,0x80,
0x18,0x71,0x38,0x2D,0x40,0x58,0x2C,0x45,0x00,0x6D,0x55,0x21,0x00,0x00,0x1E,0x01,
0x1D,0x80,0x18,0x71,0x1C,0x16,0x20,0x58,0x2C,0x25,0x00,0x6D,0x55,0x21,0x00,0x00,
0x9E,0x01,0x1D,0x00,0x72,0x51,0xD0,0x1E,0x20,0x6E,0x28,0x55,0x00,0x6D,0x55,0x21,
0x00,0x00,0x1E,0x8C,0x0A,0xD0,0x8A,0x20,0xE0,0x2D,0x10,0x10,0x3E,0x96,0x00,0x6D,
0x55,0x21,0x00,0x00,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x86,
};

//uint8_t g_tempData[EDID_TABLE_LEN];
/* Basic Audio, with deep color.  */
#if 0
uint8_t g_edidFlashEdidTable [ EDID_TABLE_LEN ] =  // 临时变量
{

    /*  00    01    02   03     04    05    06    07   08     09    0A    0B    0C    0D    0E   0F */
    /*  0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x4D, 0x29, 0x87, 0x92, 0x01, 0x00, 0x00, 0x00,
        0x20, 0x12, 0x01, 0x03, 0x80, 0x52, 0x2E, 0x78, 0x0A, 0x0D, 0xC9, 0xA0, 0x57, 0x47, 0x98, 0x27,
        0x12, 0x48, 0x4C, 0x21, 0x09, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
        0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x02, 0x3A, 0x80, 0x18, 0x71, 0x38, 0x2D, 0x40, 0x58, 0x2C,
        0x45, 0x00, 0xC4, 0x8E, 0x21, 0x00, 0x00, 0x1E, 0x01, 0x1D, 0x00, 0x72, 0x51, 0xD0, 0x1E, 0x20,
        0x6E, 0x28, 0x55, 0x00, 0xC4, 0x8E, 0x21, 0x00, 0x00, 0x1E, 0x00, 0x00, 0x00, 0xFC, 0x00, 0x43,
        0x50, 0x39, 0x32, 0x38, 0x37, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x00, 0x00, 0x00, 0xFD,
        0x00, 0x17, 0x78, 0x0F, 0x7E, 0x17, 0x00, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x01, 0x2E,

        0x02, 0x03, 0x2B, 0x72, 0x55, 0x90, 0x84, 0x03, 0x02, 0x0E, 0x0F, 0x07, 0x23, 0x24, 0x05, 0x94,
        0x13, 0x12, 0x11, 0x1D, 0x1E, 0x20, 0x21, 0x22, 0x01, 0x1F, 0x23, 0x09, 0x07, 0x07, 0x83, 0x01,
        0x00, 0x00, 0x68, 0x03, 0x0C, 0x00, 0x10, 0x00, 0xB8, 0x2D, 0x00, 0x8C, 0x0A, 0xD0, 0x8A, 0x20,
        0xE0, 0x2D, 0x10, 0x10, 0x3E, 0x96, 0x00, 0xC4, 0x8E, 0x21, 0x00, 0x00, 0x18, 0x8C, 0x0A, 0xD0,
        0x90, 0x20, 0x40, 0x31, 0x20, 0x0C, 0x40, 0x55, 0x00, 0xC4, 0x8E, 0x21, 0x00, 0x00, 0x18, 0x01,
        0x1D, 0x80, 0x18, 0x71, 0x1C, 0x16, 0x20, 0x58, 0x2C, 0x25, 0x00, 0xC4, 0x8E, 0x21, 0x00, 0x00,
        0x9E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2C*/
    /*****From HW *******/
    0x00 ,0xFF ,0xFF ,0xFF ,0xFF ,0xFF ,0xFF ,0x00 ,0x7F ,0xFF ,0x00 ,0x90 ,0x0F ,0x00 ,0x00 ,0x00 ,
    0x01 ,0x12 ,0x01 ,0x03 ,0x80 ,0xA0 ,0x5A ,0x78 ,0x0A ,0x01 ,0xC1 ,0xA0 ,0x57 ,0x47 ,0x98 ,0x27 ,
    0x12 ,0x4C ,0x4C ,0x21 ,0x08 ,0x00 ,0x31 ,0x40 ,0x45 ,0x40 ,0x61 ,0x40 ,0x81 ,0x80 ,0x01 ,0x01 ,
    0x01 ,0x01 ,0x01 ,0x01 ,0x01 ,0x01 ,0x02 ,0x3A ,0x80 ,0x18 ,0x71 ,0x38 ,0x2D ,0x40 ,0x58 ,0x2C ,
    0x45 ,0x00 ,0x40 ,0x84 ,0x63 ,0x00 ,0x00 ,0x1E ,0x28 ,0x3C ,0x80 ,0xA0 ,0x70 ,0xB0 ,0x23 ,0x40 ,
    0x30 ,0x20 ,0x36 ,0x00 ,0x40 ,0x84 ,0x63 ,0x00 ,0x00 ,0x1A ,0x00 ,0x00 ,0x00 ,0xFC ,0x00 ,0x0A ,
    0x20 ,0x20 ,0x20 ,0x20 ,0x20 ,0x20 ,0x20 ,0x20 ,0x20 ,0x20 ,0x20 ,0x20 ,0x00 ,0x00 ,0x00 ,0xFD ,
    0x00 ,0x30 ,0x3E ,0x0E ,0x44 ,0x0F ,0x00 ,0x0A ,0x20 ,0x20 ,0x20 ,0x20 ,0x20 ,0x20 ,0x01 ,0xC1 ,
    0x02 ,0x03 ,0x23 ,0x70 ,0x4F ,0x01 ,0x02 ,0x03 ,0x04 ,0x05 ,0x06 ,0x07 ,0x10 ,0x11 ,0x12 ,0x13 ,
    0x14 ,0x15 ,0x16 ,0x1F ,0x23 ,0x09 ,0x07 ,0x07 ,0x83 ,0x01 ,0x00 ,0x00 ,0x66 ,0x03 ,0x0C ,0x00 ,
    0x20 ,0x00 ,0x80 ,0x01 ,0x1D ,0x80 ,0xD0 ,0x72 ,0x1C ,0x16 ,0x20 ,0x10 ,0x2C ,0x25 ,0x80 ,0x40 ,
    0x84 ,0x63 ,0x00 ,0x00 ,0x9E ,0x01 ,0x1D ,0x80 ,0x18 ,0x71 ,0x1C ,0x16 ,0x20 ,0x58 ,0x2C ,0x25 ,
    0x00 ,0x40 ,0x84 ,0x63 ,0x00 ,0x00 ,0x98 ,0x01 ,0x1D ,0x00 ,0xBC ,0x52 ,0xD0 ,0x1E ,0x20 ,0xB8 ,
    0x28 ,0x55 ,0x40 ,0x40 ,0x84 ,0x63 ,0x00 ,0x00 ,0x1E ,0x02 ,0x3A ,0x80 ,0xD0 ,0x72 ,0x38 ,0x2D ,
    0x40 ,0x10 ,0x2C ,0x45 ,0x80 ,0x40 ,0x84 ,0x63 ,0x00 ,0x00 ,0x1E ,0x02 ,0x3A ,0x80 ,0x18 ,0x71 ,
    0x38 ,0x2D ,0x40 ,0x58 ,0x2C ,0x45 ,0x00 ,0x40 ,0x84 ,0x63 ,0x00 ,0x00 ,0x1E ,0x00 ,0x00 ,0xF8

    //From TV
    /*  [00]    [01]    [02]    [03]    [04]    [05]    [06]    [07]    [08]    [09]    [0A]    [0B]    [0C]    [0D]    [0E]    [0F]*/

    /*  0x0,0xff,0xff,0xff,0xff,0xff,0xff,0x0,0x4d,0xd9,0x2,0x74,0x1,0x1,0x1,0x1

      ,0x1,0x16,0x1,0x3,0x80,0x59,0x32,0x78,0xa,0xd,0xc9,0xa0,0x57,0x47,0x98,0x27

      ,0x12,0x48,0x4c,0x21,0x8,0x0,0x81,0x80,0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x1

      ,0x1,0x1,0x1,0x1,0x1,0x1,0x2,0x3a,0x80,0x18,0x71,0x38,0x2d,0x40,0x58,0x2c

      ,0x45,0x0,0x76,0xf2,0x31,0x0,0x0,0x1e,0x1,0x1d,0x0,0x72,0x51,0xd0,0x1e,0x20

      ,0x6e,0x28,0x55,0x0,0x76,0xf2,0x31,0x0,0x0,0x1e,0x0,0x0,0x0,0xfc,0x0,0x53

      ,0x4f,0x4e,0x59,0x20,0x54,0x56,0xa,0x20,0x20,0x20,0x20,0x20,0x0,0x0,0x0,0xfd

      ,0x0,0x30,0x3e,0xe,0x46,0xf,0x0,0xa,0x20,0x20,0x20,0x20,0x20,0x20,0x1,0xc0


    ,0x2,0x3,0x3b,0xf0,0x53,0x1f,0x10,0x14,0x5,0x13,0x4,0x20,0x22,0x3c,0x3e,0x12

    ,0x16,0x3,0x7,0x11,0x15,0x2,0x6,0x1,0x26,0x9,0x7,0x7,0x15,0x7,0x50,0x83

    ,0x1,0x0,0x0,0x74,0x3,0xc,0x0,0x30,0x0,0xb8,0x2d,0x2f,0xd0,0xa,0x1,0x40

    ,0x0,0x7f,0x20,0x30,0x70,0x80,0x90,0x76,0xe2,0x0,0xfb,0x2,0x3a,0x80,0xd0,0x72

    ,0x38,0x2d,0x40,0x10,0x2c,0x45,0x80,0x76,0xf2,0x31,0x0,0x0,0x1e,0x1,0x1d,0x0

    ,0xbc,0x52,0xd0,0x1e,0x20,0xb8,0x28,0x55,0x40,0x76,0xf2,0x31,0x0,0x0,0x1e,0x1

    ,0x1d,0x80,0xd0,0x72,0x1c,0x16,0x20,0x10,0x2c,0x25,0x80,0x76,0xf2,0x31,0x0,0x0

    ,0x9e,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x45*/

    /*   0x02,0x03,0x37,0xf1,0x4e,0x10,0x9f,0x04,0x13,0x05,0x14,0x03,0x02,0x12,0x20,0x21

         ,0x22,0x15,0x01,0x26,0x15,0x07,0x50,0x09,0x57,0x07,0x78,0x03,0x0c,0x00,0x20,0x00

         ,0x80,0x2d,0x20,0xc0,0x0e,0x01,0x4f,0x3f,0xfc,0x08,0x10,0x18,0x10,0x06,0x10,0x16

         ,0x10,0x28,0x10,0xe3,0x05,0x00,0x00,0x02,0x3a,0x80,0x18,0x71,0x38,0x2d,0x40,0x58

         ,0x2c,0x45,0x00,0xa0,0x5a,0x00,0x00,0x00,0x1e,0x01,0x1d,0x80,0x18,0x71,0x1c,0x16

         ,0x20,0x58,0x2c,0x25,0x00,0xa0,0x5a,0x00,0x00,0x00,0x9e,0x01,0x1d,0x00,0x72,0x51

         ,0xd0,0x1e,0x20,0x6e,0x28,0x55,0x00,0xa0,0x5a,0x00,0x00,0x00,0x1e,0x00,0x00,0x00

         ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3d*/

};
#endif
#define ENABLE_TWO_EDID_MODE  SI_DISABLE
// REFER SiiDrvDeviceNonVolatileInitialize()
SiiDeviceBootData_t gEdidFlashDevBootData =
{
    /*    0xAA,           // nvm_config;
        0x55,           // edid_valid;
        0x06,           // nvm_version;
    #if (ENABLE_TWO_EDID_MODE == SI_ENABLE)
        0x03,           // edid_copy_dest;  //two edid
    #else
        0x3F,           // edid_copy_dest;
    #endif
        0x3F,           // hpd_hw_ctrl;
        0x00,           // ddc_filter_sel;
        0x00,           // wakeup_source;
        0x40,           // edid_vga_copy_dest;
        { 0xFF, 0xFF }, // spare1[2];
        0xA6,           // cec_pa_addr;
        0xFF,           // spare2;
        0x10,           // cec_pad_h_ch0;
        0x00,           // cec_pad_l_ch0;
        0x20,           // cec_pad_h_ch1;
        0x00,           // cec_pad_l_ch1;   Offset 0x0F
        0x30,           // cec_pad_h_ch2;   Offset 0x10
        0x00,           // cec_pad_l_ch2;
        0x40,           // cec_pad_h_ch3;
        0x00,           // cec_pad_l_ch3;
        0x50,           // cec_pad_h_ch4;
        0x00,           // cec_pad_l_ch4;
        0x60,           // cec_pad_h_ch5;
        0x00,           // cec_pad_l_ch5;
        { 0xFF, 0xFF, 0xFF, 0xFF },// spare4[4];
        0x2C,           // checksum_ch0;    Offset 0x1C
        0x1C,           // checksum_ch1;
        0x0C,           // checksum_ch2;
        0xFC,           // checksum_ch3;
        0xEC,           // checksum_ch4;
        0xDC,           // checksum_ch5;    Offset 0x21
        { 0xFF, 0xFF }, // spare6[2];
        0x03,           // mhlPortSelect
        0xFF,           // spare
        0x84,           // miscControl0     RSEN and External Reset;    //0x26
        0xFF,           // Spare7                                       //0x27
        0x35,           // miscControl1                                 //0x28
        { 0 }           // spare8[24]

    */
    0xAA,
    0x55,
    0x06,
    0x0F, //00 extra Start
    0x3F,
    0x00,
    0x00,
    0x00, //04
    {
        0xFF,
        0xFF
    },
    0xA0,
    0xFF, //08
    0x00,
    0x10,
    0x00,
    0x20, //0C
    0x00,
    0x30,
    0x00,
    0x40, //10
    0x00,0x50,0x00,0x60, //14
    {0xFF,0xFF,0xFF,0xFF}, //18
    0xBE,0xAE,0x9E,0x8E, //1C
    0xFF,0x7E,
    {0x00,0x00}, //20
    0x03,0x10,0x00,0x00, //24 // select MHL for port 2 and 3 (1st byte in this dword)
    0x15,{
        0x00,0x00,0x00, //28
        0x00,0x00,0x00,0x00, //2C
        0x00,0x00,0x00,0x00, //30
        0x00,0x00,0x00,0x00, //34
        0x00,0x00,0x00,0x00, //38
        0x00,0x00,0x00,0x00, //3C
        0x00
    }/*,0x00,0x00,0x00, //40
    0x00,0x00,0x00,0x00, //44
    0x00,0x00,0x00,0x00, //48
    0x00,0x00,0x00,0x00, //4C
    0x00,0x00,0x00,0x00, //50
    0x00,0x00,0x00,0x00, //54
    0x00,0x00,0x00,0x00, //58
    0x00,0x00,0x00,0x00, //5C
    0x00,0x00,0x00,0x00, //60
    0x00,0x00,0x00,0x00, //64
    0x00,0x00,0x00,0x00, //68
    0x00,0x00,0x00,0x00, //6C
    0x00,0x00,0x00,0x00, //70
    0x00,0x00,0x00,0x00, //74
    0x00,0x00,0x00,0x00, //78
    0xFF,0xFF,0xFF,0xFF //7C
    */
};


